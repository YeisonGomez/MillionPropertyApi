{
	"info": {
		"_postman_id": "millionproperty-graphql-collection",
		"name": "MillionProperty GraphQL API",
		"description": "Colección GraphQL con CRUD básico (GetAll, GetById, Create) para todos los módulos",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Properties",
			"item": [
				{
					"name": "Get All Properties",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "query GetProperties {\n  properties(page: 1, pageSize: 10) {\n    items {\n      idProperty\n      name\n      address\n      price\n      codeInternal\n      year\n      idOwner\n      firstImage\n    }\n    totalCount\n    page\n    pageSize\n    totalPages\n    hasNextPage\n    hasPreviousPage\n  }\n}",
								"variables": ""
							}
						},
						"url": {
							"raw": "{{base_url}}/graphql",
							"host": ["{{base_url}}"],
							"path": ["graphql"]
						}
					}
				},
				{
					"name": "Get Property by ID",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "query GetProperty($id: String!) {\n  property(id: $id) {\n    idProperty\n    name\n    address\n    price\n    codeInternal\n    year\n    idOwner\n    owner {\n      idOwner\n      name\n      address\n      photo\n      birthday\n    }\n    firstImage\n    images\n  }\n}",
								"variables": "{\n  \"id\": \"{{property_id}}\"\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}/graphql",
							"host": ["{{base_url}}"],
							"path": ["graphql"]
						}
					}
				},
				{
					"name": "Get Properties by Owner",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "query GetPropertiesByOwner($ownerId: String!) {\n  propertiesByOwner(ownerId: $ownerId) {\n    idProperty\n    name\n    address\n    price\n    codeInternal\n    year\n    idOwner\n    firstImage\n  }\n}",
								"variables": "{\n  \"ownerId\": \"{{owner_id}}\"\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}/graphql",
							"host": ["{{base_url}}"],
							"path": ["graphql"]
						}
					}
				},
				{
					"name": "Search Properties by Name/Address",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "query SearchProperties($query: String!) {\n  properties(query: $query, page: 1, pageSize: 10) {\n    items {\n      idProperty\n      name\n      address\n      price\n      firstImage\n    }\n    totalCount\n  }\n}",
								"variables": "{\n  \"query\": \"Casa\"\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}/graphql",
							"host": ["{{base_url}}"],
							"path": ["graphql"]
						}
					}
				},
				{
					"name": "Search Properties by Price Range",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "query SearchByPriceRange($minPrice: Decimal, $maxPrice: Decimal) {\n  properties(minPrice: $minPrice, maxPrice: $maxPrice) {\n    items {\n      idProperty\n      name\n      price\n      address\n      firstImage\n    }\n    totalCount\n  }\n}",
								"variables": "{\n  \"minPrice\": 400000000,\n  \"maxPrice\": 800000000\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}/graphql",
							"host": ["{{base_url}}"],
							"path": ["graphql"]
						}
					}
				},
				{
					"name": "Create Property",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "mutation CreateProperty($input: CreatePropertyDtoInput!) {\n  createProperty(input: $input) {\n    idProperty\n    name\n    address\n    price\n    codeInternal\n    year\n    idOwner\n    firstImage\n  }\n}",
								"variables": "{\n  \"input\": {\n    \"name\": \"Nueva Propiedad\",\n    \"address\": \"Calle 123 #45-67, Bogotá\",\n    \"price\": 350000000,\n    \"codeInternal\": \"PROP-NEW\",\n    \"year\": 2024,\n    \"idOwner\": \"{{owner_id}}\"\n  }\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}/graphql",
							"host": ["{{base_url}}"],
							"path": ["graphql"]
						}
					}
				}
			]
		},
		{
			"name": "Owners",
			"item": [
				{
					"name": "Get All Owners",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "query GetOwners {\n  owners {\n    idOwner\n    name\n    address\n    photo\n    birthday\n  }\n}",
								"variables": ""
							}
						},
						"url": {
							"raw": "{{base_url}}/graphql",
							"host": ["{{base_url}}"],
							"path": ["graphql"]
						}
					}
				},
				{
					"name": "Get Owner by ID",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "query GetOwner($id: String!) {\n  owner(id: $id) {\n    idOwner\n    name\n    address\n    photo\n    birthday\n  }\n}",
								"variables": "{\n  \"id\": \"{{owner_id}}\"\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}/graphql",
							"host": ["{{base_url}}"],
							"path": ["graphql"]
						}
					}
				},
				{
					"name": "Create Owner",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "mutation CreateOwner($input: CreateOwnerDtoInput!) {\n  createOwner(input: $input) {\n    idOwner\n    name\n    address\n    photo\n    birthday\n  }\n}",
								"variables": "{\n  \"input\": {\n    \"name\": \"Nuevo Propietario\",\n    \"address\": \"Calle 50 #10-20, Bogotá\",\n    \"photo\": \"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150\",\n    \"birthday\": \"1990-01-15T00:00:00Z\"\n  }\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}/graphql",
							"host": ["{{base_url}}"],
							"path": ["graphql"]
						}
					}
				}
			]
		},
		{
			"name": "Property Images",
			"item": [
				{
					"name": "Get All Property Images",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "query GetPropertyImages {\n  propertyImages {\n    idPropertyImage\n    idProperty\n    file\n    enabled\n  }\n}",
								"variables": ""
							}
						},
						"url": {
							"raw": "{{base_url}}/graphql",
							"host": ["{{base_url}}"],
							"path": ["graphql"]
						}
					}
				},
				{
					"name": "Get Property Image by ID",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "query GetPropertyImage($id: String!) {\n  propertyImage(id: $id) {\n    idPropertyImage\n    idProperty\n    file\n    enabled\n  }\n}",
								"variables": "{\n  \"id\": \"{{property_image_id}}\"\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}/graphql",
							"host": ["{{base_url}}"],
							"path": ["graphql"]
						}
					}
				},
				{
					"name": "Get Images by Property",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "query GetImagesByProperty($propertyId: String!) {\n  imagesByProperty(propertyId: $propertyId) {\n    idPropertyImage\n    idProperty\n    file\n    enabled\n  }\n}",
								"variables": "{\n  \"propertyId\": \"{{property_id}}\"\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}/graphql",
							"host": ["{{base_url}}"],
							"path": ["graphql"]
						}
					}
				},
				{
					"name": "Create Property Image",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "mutation CreatePropertyImage($input: CreatePropertyImageDtoInput!) {\n  createPropertyImage(input: $input) {\n    idPropertyImage\n    idProperty\n    file\n    enabled\n  }\n}",
								"variables": "{\n  \"input\": {\n    \"idProperty\": \"{{property_id}}\",\n    \"file\": \"https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?w=800\",\n    \"enabled\": true\n  }\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}/graphql",
							"host": ["{{base_url}}"],
							"path": ["graphql"]
						}
					}
				}
			]
		},
		{
			"name": "Property Traces",
			"item": [
				{
					"name": "Get All Property Traces",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "query GetPropertyTraces {\n  propertyTraces {\n    idPropertyTrace\n    dateSale\n    name\n    value\n    tax\n    idProperty\n  }\n}",
								"variables": ""
							}
						},
						"url": {
							"raw": "{{base_url}}/graphql",
							"host": ["{{base_url}}"],
							"path": ["graphql"]
						}
					}
				},
				{
					"name": "Get Property Trace by ID",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "query GetPropertyTrace($id: String!) {\n  propertyTrace(id: $id) {\n    idPropertyTrace\n    dateSale\n    name\n    value\n    tax\n    idProperty\n  }\n}",
								"variables": "{\n  \"id\": \"{{property_trace_id}}\"\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}/graphql",
							"host": ["{{base_url}}"],
							"path": ["graphql"]
						}
					}
				},
				{
					"name": "Get Traces by Property",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "query GetTracesByProperty($propertyId: String!) {\n  tracesByProperty(propertyId: $propertyId) {\n    idPropertyTrace\n    dateSale\n    name\n    value\n    tax\n    idProperty\n  }\n}",
								"variables": "{\n  \"propertyId\": \"{{property_id}}\"\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}/graphql",
							"host": ["{{base_url}}"],
							"path": ["graphql"]
						}
					}
				},
				{
					"name": "Create Property Trace",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "mutation CreatePropertyTrace($input: CreatePropertyTraceDtoInput!) {\n  createPropertyTrace(input: $input) {\n    idPropertyTrace\n    dateSale\n    name\n    value\n    tax\n    idProperty\n  }\n}",
								"variables": "{\n  \"input\": {\n    \"dateSale\": \"2024-01-15T00:00:00Z\",\n    \"name\": \"Venta a Pedro García\",\n    \"value\": 350000000,\n    \"tax\": 7000000,\n    \"idProperty\": \"{{property_id}}\"\n  }\n}"
							}
						},
						"url": {
							"raw": "{{base_url}}/graphql",
							"host": ["{{base_url}}"],
							"path": ["graphql"]
						}
					}
				}
			]
		},
		{
			"name": "GraphQL Playground",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}/graphql",
					"host": ["{{base_url}}"],
					"path": ["graphql"]
				},
				"description": "Abre el GraphQL Playground en el navegador"
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:5189",
			"type": "default"
		},
		{
			"key": "owner_id",
			"value": "",
			"type": "default"
		},
		{
			"key": "property_id",
			"value": "",
			"type": "default"
		},
		{
			"key": "property_image_id",
			"value": "",
			"type": "default"
		},
		{
			"key": "property_trace_id",
			"value": "",
			"type": "default"
		}
	]
}
